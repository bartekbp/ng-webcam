!function(){"use strict";function n(){function n(){return['<div class="ng-webcam" ng-show="vm.webcamLive">','<div id="ng-webcam-container"></div>'].join("")}function i(n,i,e,o){o.init(),n.$on("$destroy",function(){o.destroy()})}function e(n,i){function e(){d.config=d.config||{},angular.isUndefined(d.config.viewerWidth)&&(d.config.viewerWidth="auto"),angular.isUndefined(d.config.viewerHeight)&&(d.config.viewerHeight="auto"),angular.isUndefined(d.config.outputWidth)&&(d.config.outputWidth=320),angular.isUndefined(d.config.outputHeight)&&(d.config.outputHeight=240),angular.isUndefined(d.config.delay)&&(d.config.delay=0),angular.isUndefined(d.config.shots)&&(d.config.shots=1),t(),c()}function o(){Webcam.reset(),d.webcamLive=!1,d.webcamLoaded=!1}function t(){angular.isDefined(d.config.shutterUrl)&&(u=new Audio,u.autoplay=!1,navigator.userAgent.match(/Firefox/)?u.src=d.config.shutterUrl.split(".")[0]+".ogg":u.src=d.config.shutterUrl),Webcam.set({width:d.config.viewerWidth,height:d.config.viewerHeight,dest_width:d.config.outputWidth,dest_height:d.config.outputHeight}),angular.isDefined(d.config.flashFallbackUrl)&&Webcam.setSWFLocation(d.config.flashFallbackUrl),Webcam.attach("#ng-webcam-container")}function c(){Webcam.on("load",function(){n.$apply(function(){d.webcamLoaded=!0,angular.isDefined(d.onLoad)&&d.onLoad()})}),Webcam.on("live",function(){n.$apply(function(){d.webcamLive=!0})}),Webcam.on("error",function(n){if(angular.isDefined(d.onError))return d.onError({err:n})})}function a(n){u&&u.play(),n===d.config.shots-1&&i.cancel(s),Webcam.snap(function(i){if(l[n]=i,n<d.config.shots-1&&angular.isDefined(d.onCapturing)){var e=Math.round(100*(n+1)/d.config.shots);d.onCapturing({src:i,progress:e})}if(n===d.config.shots-1&&angular.isDefined(d.onComplete))return d.onComplete({src:l,progress:100})})}function r(){var n=0;s=i(function(){a(n),n++},d.config.delay,d.config.shots)}function f(){Webcam.attach("#ng-webcam-container")}function g(){o()}var u,s,d=this,l=[];d.webcamLoaded=!1,d.webcamLive=!1,d.progress="0%",d.init=e,d.destroy=o,n.$on("ngWebcam_capture",r),n.$on("ngWebcam_on",f),n.$on("ngWebcam_off",g)}var o={restrict:"E",template:n,link:i,bindToController:!0,controller:e,controllerAs:"vm",scope:{config:"=",onComplete:"&",onError:"&",onLoad:"&",onCapturing:"&"}};return e.$inject=["$scope","$interval"],o}angular.module("ng-webcam",[]).directive("ngWebcam",n),n.$inject=[]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nLXdlYmNhbS5qcyJdLCJuYW1lcyI6WyJuZ1dlYmNhbSIsInRlbXBsYXRlIiwiam9pbiIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImN0cmwiLCJpbml0IiwiJG9uIiwiZGVzdHJveSIsIm5nV2ViY2FtQ29udHJvbGxlciIsIiRzY29wZSIsIiRpbnRlcnZhbCIsInZtIiwiY29uZmlnIiwiYW5ndWxhciIsImlzVW5kZWZpbmVkIiwidmlld2VyV2lkdGgiLCJ2aWV3ZXJIZWlnaHQiLCJvdXRwdXRXaWR0aCIsIm91dHB1dEhlaWdodCIsImRlbGF5Iiwic2hvdHMiLCJjb25maWd1cmUiLCJjb25maWd1cmVMaXN0ZW5lcnMiLCJXZWJjYW0iLCJyZXNldCIsIndlYmNhbUxpdmUiLCJ3ZWJjYW1Mb2FkZWQiLCJpc0RlZmluZWQiLCJzaHV0dGVyVXJsIiwic291bmQiLCJBdWRpbyIsImF1dG9wbGF5IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJzcmMiLCJzcGxpdCIsInNldCIsIndpZHRoIiwiaGVpZ2h0IiwiZGVzdF93aWR0aCIsImRlc3RfaGVpZ2h0IiwiZmxhc2hGYWxsYmFja1VybCIsInNldFNXRkxvY2F0aW9uIiwiYXR0YWNoIiwib24iLCIkYXBwbHkiLCJvbkxvYWQiLCJlcnIiLCJvbkVycm9yIiwiY2FwdHVyZSIsImluZGV4IiwicGxheSIsImNhbmNlbCIsInRpbWVyIiwic25hcCIsImRhdGFfdXJpIiwiaW1hZ2VzIiwib25DYXB0dXJpbmciLCJwcm9ncmVzcyIsIk1hdGgiLCJyb3VuZCIsIm9uQ29tcGxldGUiLCJvbldlYmNhbUNhcHR1cmUiLCJjb3VudCIsIm9uV2ViY2FtT24iLCJvbldlYmNhbU9mZiIsInRoaXMiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiJGluamVjdCIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZ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eUIsRUFEQTNDLEVBQUF3RCxLQUVBVixJQUNBOUMsR0FBQWUsY0FBQSxFQUNBZixFQUFBYyxZQUFBLEVBQ0FkLEVBQUFnRCxTQUFBLEtBQ0FoRCxFQUFBTixLQUFBQSxFQUNBTSxFQUFBSixRQUFBQSxFQVdBRSxFQUFBSCxJQUFBLG1CQUFBeUQsR0FXQXRELEVBQUFILElBQUEsY0FBQTJELEdBV0F4RCxFQUFBSCxJQUFBLGVBQUE0RCxHQXhFQSxHQUFBRSxJQUNBQyxTQUFBLElBQ0F2RSxTQUFBQSxFQUNBRSxLQUFBQSxFQUNBc0Usa0JBQUEsRUFDQUMsV0FBQS9ELEVBQ0FnRSxhQUFBLEtBQ0F2RSxPQUNBVyxPQUFBLElBQ0FrRCxXQUFBLElBQ0FiLFFBQUEsSUFDQUYsT0FBQSxJQUNBVyxZQUFBLEtBb0tBLE9BcEpBbEQsR0FBQWlFLFNBQUEsU0FBQSxhQW9KQUwsRUFwTUF2RCxRQUFBNkQsT0FBQSxnQkFBQU4sVUFBQSxXQUFBdkUsR0FDQUEsRUFBQTRFIiwiZmlsZSI6Im5nLXdlYmNhbS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ25nLXdlYmNhbScsIFtdKS5kaXJlY3RpdmUoJ25nV2ViY2FtJywgbmdXZWJjYW0pO1xuICBuZ1dlYmNhbS4kaW5qZWN0ID0gW107XG4gIC8qKlxuICAgKiAgQG5nZG9jIERpcmVjdGl2ZVxuICAgKiAgQG5hbWUgbmctd2ViY2FtXG4gICAqICBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogIERpcmVjdGl2ZSBmb3IgY2FwdHVyaW5nIGltYWdlcyBmcm9tIHlvdXIgY29tcHV0ZXIncyBjYW1lcmEsIGFuZCBkZWxpdmVyeSB0aGVuIHRvIHlvdSBhcyBkYXRhIHVyaVxuICAgKlxuICAgKiAgQHVzYWdlXG4gICAqICBgYGBodG1sXG4gICAqICA8bmctd2ViY2FtXG4gICAqICAgIG9uLWNvbXBsZXRlPVwiY2FsbGJhY2tDb21wbGV0ZShzcmMpXCJcbiAgICogICAgb24tZXJyb3I9XCJjYWxsYmFja0Vycm9yKGVycilcIlxuICAgKiAgICBvbi1sb2FkPVwiY2FsbGJhY2tMb2FkKClcIlxuICAgKiAgICBvbi1jYXB0dXJpbmc9XCJjYWxsYmFja0NhcHR1cmluZyhzcmMpXCJcbiAgICogICAgY29uZmlnPVwiY29uZmlnXCI+PC9uZy13ZWJjYW0+XG4gICAqICBgYGBcbiAgICovXG4gIGZ1bmN0aW9uIG5nV2ViY2FtKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgICAgbGluazogbGluayxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBuZ1dlYmNhbUNvbnRyb2xsZXIsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb25maWc6ICc9JyxcbiAgICAgICAgb25Db21wbGV0ZTogJyYnLFxuICAgICAgICBvbkVycm9yOiAnJicsXG4gICAgICAgIG9uTG9hZDogJyYnLFxuICAgICAgICBvbkNhcHR1cmluZzogJyYnXG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHRlbXBsYXRlKCkge1xuICAgICAgcmV0dXJuIFsnPGRpdiBjbGFzcz1cIm5nLXdlYmNhbVwiIG5nLXNob3c9XCJ2bS53ZWJjYW1MaXZlXCI+JyxcbiAgICAgICAgJzxkaXYgaWQ9XCJuZy13ZWJjYW0tY29udGFpbmVyXCI+PC9kaXY+J10uam9pbignJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIGN0cmwuaW5pdCgpO1xuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHJsLmRlc3Ryb3koKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG5nV2ViY2FtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGludGVydmFsJ107XG5cbiAgICBmdW5jdGlvbiBuZ1dlYmNhbUNvbnRyb2xsZXIoJHNjb3BlLCAkaW50ZXJ2YWwpIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZhciBzb3VuZCwgdGltZXI7XG4gICAgICB2YXIgaW1hZ2VzID0gW107XG4gICAgICB2bS53ZWJjYW1Mb2FkZWQgPSBmYWxzZTtcbiAgICAgIHZtLndlYmNhbUxpdmUgPSBmYWxzZTtcbiAgICAgIHZtLnByb2dyZXNzID0gJzAlJztcbiAgICAgIHZtLmluaXQgPSBpbml0O1xuICAgICAgdm0uZGVzdHJveSA9IGRlc3Ryb3k7XG4gICAgICAvKipcbiAgICAgICAqICBAbmdkb2MgbGlzdGVuZXJcbiAgICAgICAqICBAbmFtZSBuZ1dlYmNhbV9jYXB0dXJlXG4gICAgICAgKiAgQGRlc2NyaXB0aW9uXG4gICAgICAgKlxuICAgICAgICogIExpc3RlbmVyIGZvciBjYXB0dXJlIHVzZXIgYWN0aW9uXG4gICAgICAgKlxuICAgICAgICogIEB1c2FnZVxuICAgICAgICogIGAkc2NvcGUuJGJyb2FkY2FzdCgnbmdXZWJjYW1fY2FwdHVyZScpO2BcbiAgICAgICAqL1xuICAgICAgJHNjb3BlLiRvbignbmdXZWJjYW1fY2FwdHVyZScsIG9uV2ViY2FtQ2FwdHVyZSk7XG4gICAgICAvKipcbiAgICAgICAqICBAbmdkb2MgbGlzdGVuZXJcbiAgICAgICAqICBAbmFtZSBuZ1dlYmNhbV9vblxuICAgICAgICogIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqICBMaXN0ZW5lciBmb3IgY2FtZXJhIG9uIHVzZXIgYWN0aW9uXG4gICAgICAgKlxuICAgICAgICogIEB1c2FnZVxuICAgICAgICogIGAkc2NvcGUuJGJyb2FkY2FzdCgnbmdXZWJjYW1fb24nKTtgXG4gICAgICAgKi9cbiAgICAgICRzY29wZS4kb24oJ25nV2ViY2FtX29uJywgb25XZWJjYW1Pbik7XG4gICAgICAvKipcbiAgICAgICAqICBAbmdkb2MgbGlzdGVuZXJcbiAgICAgICAqICBAbmFtZSBuZ1dlYmNhbV9vZmZcbiAgICAgICAqICBAZGVzY3JpcHRpb25cbiAgICAgICAqXG4gICAgICAgKiAgTGlzdGVuZXIgZm9yIGNhbWVyYSBvZmYgdXNlciBhY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiAgQHVzYWdlXG4gICAgICAgKiAgYCRzY29wZS4kYnJvYWRjYXN0KCduZ1dlYmNhbV9vZmYnKTtgXG4gICAgICAgKi9cbiAgICAgICRzY29wZS4kb24oJ25nV2ViY2FtX29mZicsIG9uV2ViY2FtT2ZmKTtcblxuICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgdm0uY29uZmlnID0gdm0uY29uZmlnIHx8IHt9O1xuICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLmNvbmZpZy52aWV3ZXJXaWR0aCkpIHZtLmNvbmZpZy52aWV3ZXJXaWR0aCA9ICdhdXRvJztcbiAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS5jb25maWcudmlld2VySGVpZ2h0KSkgdm0uY29uZmlnLnZpZXdlckhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS5jb25maWcub3V0cHV0V2lkdGgpKSB2bS5jb25maWcub3V0cHV0V2lkdGggPSAzMjA7XG4gICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0uY29uZmlnLm91dHB1dEhlaWdodCkpIHZtLmNvbmZpZy5vdXRwdXRIZWlnaHQgPSAyNDA7XG4gICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0uY29uZmlnLmRlbGF5KSkgdm0uY29uZmlnLmRlbGF5ID0gMDtcbiAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS5jb25maWcuc2hvdHMpKSB2bS5jb25maWcuc2hvdHMgPSAxO1xuICAgICAgICBjb25maWd1cmUoKTtcbiAgICAgICAgY29uZmlndXJlTGlzdGVuZXJzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIFdlYmNhbS5yZXNldCgpO1xuICAgICAgICB2bS53ZWJjYW1MaXZlID0gZmFsc2U7XG4gICAgICAgIHZtLndlYmNhbUxvYWRlZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb25maWd1cmUoKSB7XG4gICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmNvbmZpZy5zaHV0dGVyVXJsKSkge1xuICAgICAgICAgIHNvdW5kID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgICAgc291bmQuYXV0b3BsYXkgPSBmYWxzZTtcbiAgICAgICAgICBpZihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9GaXJlZm94LykpIHtcbiAgICAgICAgICAgIHNvdW5kLnNyYyA9IHZtLmNvbmZpZy5zaHV0dGVyVXJsLnNwbGl0KCcuJylbMF0gKyAnLm9nZyc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLnNyYyA9IHZtLmNvbmZpZy5zaHV0dGVyVXJsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBXZWJjYW0uc2V0KHtcbiAgICAgICAgICB3aWR0aDogdm0uY29uZmlnLnZpZXdlcldpZHRoLFxuICAgICAgICAgIGhlaWdodDogdm0uY29uZmlnLnZpZXdlckhlaWdodCxcbiAgICAgICAgICBkZXN0X3dpZHRoOiB2bS5jb25maWcub3V0cHV0V2lkdGgsXG4gICAgICAgICAgZGVzdF9oZWlnaHQ6IHZtLmNvbmZpZy5vdXRwdXRIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmNvbmZpZy5mbGFzaEZhbGxiYWNrVXJsKSkge1xuICAgICAgICAgIFdlYmNhbS5zZXRTV0ZMb2NhdGlvbih2bS5jb25maWcuZmxhc2hGYWxsYmFja1VybCk7XG4gICAgICAgIH1cbiAgICAgICAgV2ViY2FtLmF0dGFjaCgnI25nLXdlYmNhbS1jb250YWluZXInKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY29uZmlndXJlTGlzdGVuZXJzKCkge1xuICAgICAgICBXZWJjYW0ub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdm0ud2ViY2FtTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLm9uTG9hZCkpIHtcbiAgICAgICAgICAgICAgdm0ub25Mb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBXZWJjYW0ub24oJ2xpdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdm0ud2ViY2FtTGl2ZSA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBXZWJjYW0ub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQodm0ub25FcnJvcikpIHtcbiAgICAgICAgICAgIHJldHVybiB2bS5vbkVycm9yKHtlcnI6ZXJyfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2FwdHVyZShpbmRleCkge1xuICAgICAgICBpZihzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihpbmRleCA9PT0gKHZtLmNvbmZpZy5zaG90cy0xKSkge1xuICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwodGltZXIpO1xuICAgICAgICB9XG4gICAgICAgIFdlYmNhbS5zbmFwKGZ1bmN0aW9uKGRhdGFfdXJpKSB7XG4gICAgICAgICAgaW1hZ2VzW2luZGV4XSA9IGRhdGFfdXJpO1xuICAgICAgICAgIGlmKGluZGV4IDwgKHZtLmNvbmZpZy5zaG90cy0xKSAmJiBhbmd1bGFyLmlzRGVmaW5lZCh2bS5vbkNhcHR1cmluZykpIHtcbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoKChpbmRleCsxKSAqIDEwMCkgLyB2bS5jb25maWcuc2hvdHMpO1xuICAgICAgICAgICAgdm0ub25DYXB0dXJpbmcoe1xuICAgICAgICAgICAgICBzcmM6IGRhdGFfdXJpLFxuICAgICAgICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihpbmRleCA9PT0gKHZtLmNvbmZpZy5zaG90cy0xKSAmJiBhbmd1bGFyLmlzRGVmaW5lZCh2bS5vbkNvbXBsZXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZtLm9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICBzcmM6IGltYWdlcyxcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDEwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25XZWJjYW1DYXB0dXJlKCkge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICB0aW1lciA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYXB0dXJlKGNvdW50KTtcbiAgICAgICAgICBjb3VudCsrO1xuICAgICAgICB9LCB2bS5jb25maWcuZGVsYXksIHZtLmNvbmZpZy5zaG90cyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uV2ViY2FtT24oKSB7XG4gICAgICAgIFdlYmNhbS5hdHRhY2goJyNuZy13ZWJjYW0tY29udGFpbmVyJyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uV2ViY2FtT2ZmKCkge1xuICAgICAgICBkZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
